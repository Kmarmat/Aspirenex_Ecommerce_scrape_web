exports.id=123,exports.ids=[123],exports.modules={4086:(e,a,d)=>{let c={fdb6bf38d081c8170d29e78cdc5266db6bdb0475:()=>Promise.resolve().then(d.bind(d,3073)).then(e=>e.scrapeAndStoreProduct),aee7ee823e621023efca3c25095ad31a5b17ed5a:()=>Promise.resolve().then(d.bind(d,3073)).then(e=>e.getProductById),"900e7f3cbf9ed0e4d171a46327eb8c03ea5a2864":()=>Promise.resolve().then(d.bind(d,3073)).then(e=>e.getAllProducts),"3d3a2b5429dc3a9d4efc75ddafada431ef8783ce":()=>Promise.resolve().then(d.bind(d,3073)).then(e=>e.getSimilarProducts),bb8c136697eab0b09d299e5a25268a0069d2282b:()=>Promise.resolve().then(d.bind(d,3073)).then(e=>e.addUserEmailToProduct),"90d3d88f69aee2656cbc868b6a72796fcd30adfb":()=>Promise.resolve().then(d.bind(d,934)).then(e=>e.scrapeAmazonProduct),"90e755164d232ade5a3eca71e8d8c7cdcfdac080":()=>Promise.resolve().then(d.bind(d,5103)).then(e=>e.generateEmailBody),"64dfae728ca8829c4bf53b2e2a7a74a3aa758505":()=>Promise.resolve().then(d.bind(d,5103)).then(e=>e.sendEmail)};async function t(e,...a){let d=await c[e]();return d.apply(null,a)}e.exports={fdb6bf38d081c8170d29e78cdc5266db6bdb0475:t.bind(null,"fdb6bf38d081c8170d29e78cdc5266db6bdb0475"),aee7ee823e621023efca3c25095ad31a5b17ed5a:t.bind(null,"aee7ee823e621023efca3c25095ad31a5b17ed5a"),"900e7f3cbf9ed0e4d171a46327eb8c03ea5a2864":t.bind(null,"900e7f3cbf9ed0e4d171a46327eb8c03ea5a2864"),"3d3a2b5429dc3a9d4efc75ddafada431ef8783ce":t.bind(null,"3d3a2b5429dc3a9d4efc75ddafada431ef8783ce"),bb8c136697eab0b09d299e5a25268a0069d2282b:t.bind(null,"bb8c136697eab0b09d299e5a25268a0069d2282b"),"90d3d88f69aee2656cbc868b6a72796fcd30adfb":t.bind(null,"90d3d88f69aee2656cbc868b6a72796fcd30adfb"),"90e755164d232ade5a3eca71e8d8c7cdcfdac080":t.bind(null,"90e755164d232ade5a3eca71e8d8c7cdcfdac080"),"64dfae728ca8829c4bf53b2e2a7a74a3aa758505":t.bind(null,"64dfae728ca8829c4bf53b2e2a7a74a3aa758505")}},8279:(e,a,d)=>{"use strict";d.d(a,{x4:()=>t,yS:()=>r}),d(391),d(3009);var c=d(1324),t=(0,c.$)("fdb6bf38d081c8170d29e78cdc5266db6bdb0475");(0,c.$)("aee7ee823e621023efca3c25095ad31a5b17ed5a"),(0,c.$)("900e7f3cbf9ed0e4d171a46327eb8c03ea5a2864"),(0,c.$)("3d3a2b5429dc3a9d4efc75ddafada431ef8783ce");var r=(0,c.$)("bb8c136697eab0b09d299e5a25268a0069d2282b")},6134:(e,a,d)=>{"use strict";d.d(a,{Z:()=>l});var c=d(8144),t=d(5042),r=d.n(t),i=d(4602),n=d.n(i);d(3830);let l=({product:e})=>(0,c.jsxs)(n(),{href:`/products/${e._id}`,className:"product-card",children:[c.jsx("div",{className:"product-card_img-container",children:c.jsx(r(),{src:e.image,alt:e.title,width:200,height:200,className:"product-card_img"})}),(0,c.jsxs)("div",{className:"flex flex-col gap-3",children:[c.jsx("h3",{className:"product-title",children:e.title}),(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("p",{className:"text-black opacity-50 text-lg capitalize",children:e.category}),(0,c.jsxs)("p",{className:"text-black text-lg font-semibold",children:[c.jsx("span",{children:e?.currency}),c.jsx("span",{children:e?.currentPrice})]})]})]})]})},3073:(e,a,d)=>{"use strict";d.r(a),d.d(a,{addUserEmailToProduct:()=>h,getAllProducts:()=>o,getProductById:()=>f,getSimilarProducts:()=>u,scrapeAndStoreProduct:()=>s});var c=d(459),t=d(561),r=d(3519),i=d(8291),n=d(934),l=d(1538),b=d(5103);async function s(e){if(e)try{(0,i.P)();let a=await (0,n.scrapeAmazonProduct)(e);if(!a)return;let d=a,c=await r.Z.findOne({url:a.url});if(c){let e=[...c.priceHistory,{price:a.currentPrice}];d={...a,priceHistory:e,lowestPrice:(0,l.nd)(e),highestPrice:(0,l.TF)(e),averagePrice:(0,l.bd)(e)}}let b=await r.Z.findOneAndUpdate({url:a.url},d,{upsert:!0,new:!0});(0,t.revalidatePath)(`/products/${b._id}`)}catch(e){throw Error(`Failed to create/update product: ${e.message}`)}}async function f(e){try{(0,i.P)();let a=await r.Z.findOne({_id:e});if(!a)return null;return a}catch(e){console.log(e)}}async function o(){try{(0,i.P)();let e=await r.Z.find();return e}catch(e){console.log(e)}}async function u(e){try{(0,i.P)();let a=await r.Z.findById(e);if(!a)return null;let d=await r.Z.find({_id:{$ne:e}}).limit(3);return d}catch(e){console.log(e)}}async function h(e,a){try{let d=await r.Z.findById(e);if(!d)return;let c=d.users.some(e=>e.email===a);if(!c){d.users.push({email:a}),await d.save();let e=await (0,b.generateEmailBody)(d,"WELCOME");await (0,b.sendEmail)(e,[a])}}catch(e){console.log(e)}}(0,d(1419).h)([s,f,o,u,h]),(0,c.U)("fdb6bf38d081c8170d29e78cdc5266db6bdb0475",null,s),(0,c.U)("aee7ee823e621023efca3c25095ad31a5b17ed5a",null,f),(0,c.U)("900e7f3cbf9ed0e4d171a46327eb8c03ea5a2864",null,o),(0,c.U)("3d3a2b5429dc3a9d4efc75ddafada431ef8783ce",null,u),(0,c.U)("bb8c136697eab0b09d299e5a25268a0069d2282b",null,h)},7481:(e,a,d)=>{"use strict";d.r(a),d.d(a,{default:()=>t});var c=d(6885);let t=e=>{let a=(0,c.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:a+""}]}}};